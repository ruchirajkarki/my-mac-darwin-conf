# Direnv template: add local HTTPS certs (mkcert)

# Start from the standard flake-aware template if you use Nix devShells
use flake || layout node
PATH_add node_modules/.bin

# mkcert: create and trust a local CA, then generate certs once:
#   mkcert -install
#   mkcert localhost 127.0.0.1 ::1
# This creates e.g. "localhost+2.pem" and "localhost+2-key.pem" in CWD.

# Common env vars understood by many dev servers and proxies.
# Note: Next.js does not natively read HTTPS + SSL_* in all versions.
# To use HTTPS with Next dev, consider a reverse proxy (e.g., Caddy) or a custom server,
# or run a proxy only for assets/APIs.
export HTTPS=1
export SSL_CRT_FILE="$PWD/localhost+2.pem"
export SSL_KEY_FILE="$PWD/localhost+2-key.pem"

dotenv_if_exists .env

