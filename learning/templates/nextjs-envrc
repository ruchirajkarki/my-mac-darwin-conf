# Direnv template for Next.js projects
#
# Usage:
# 1) Copy this file to your project root as `.envrc`
# 2) Run `direnv allow` once in the project directory

# Prefer Nix devShell if you have a flake
# (uses `devShell`/`devShells.<name>` automatically)
use flake

# Fallback to a plain Node layout if no flake is present
layout node

# Add local project binaries to the PATH (e.g., next, eslint, prettier)
PATH_add node_modules/.bin

# Optional: speed up `pnpm`/`yarn` by letting Corepack pick the pinned version
if command -v corepack >/dev/null 2>&1; then
  export COREPACK_HOME="${XDG_DATA_HOME:-$HOME/.local/share}/corepack"
  corepack enable --install-directory "$HOME/.local/bin" >/dev/null 2>&1 || true
fi

# Optional quality-of-life flags (safe to remove if undesired)
export NEXT_TELEMETRY_DISABLED=1
export BROWSERSLIST_IGNORE_OLD_DATA=1

# Load .env if present (without failing if itâ€™s missing)
dotenv_if_exists .env

